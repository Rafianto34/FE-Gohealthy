<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin - Quotes</title>


 <style>
  body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
  background-color: #2c7744;
  color: #333;
}

/* Header */
.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: white;
  padding: 1rem 2rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  position: sticky;
  top: 0;
  z-index: 1000;
}

.logo {
  color: white;
  text-decoration: none;
  font-size: 1.2rem;
  font-weight: bold;
  padding: 0.5rem 1rem;
  background: #45a049;
  border-radius: 5px;
  transition: background-color 0.3s ease, transform 0.2s ease;
}

.logo:hover {
  background: #3e9a5c;
  transform: scale(1.05);
}

.article-link {
  color: white;
  text-decoration: none;
  font-size: 1.2rem;
  font-weight: bold;
  padding: 0.5rem 1rem;
  background: #45a049;
  border-radius: 5px;
  transition: background-color 0.3s ease, transform 0.2s ease;
}

.article-link:hover {
  background: #3e9a5c;
  transform: scale(1.05);
}
/* Main Content */
.main {
  padding: 2rem;
}

.admin-title {
  text-align: center;
  font-size: 2rem;
  color: #ffffff;
  margin-bottom: 1rem;
}

.container {
  max-width: 800px;
  margin: 0 auto;
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  padding: 1.5rem;
}

.section-title {
  text-align: center;
  font-size: 1.5rem;
  margin-bottom: 1rem;
  color: #4caf50;
}

.quotes-form {
  display: flex;
  justify-content: space-between;
  margin-bottom: 1rem;
  gap: 1rem;
}

.quote-input {
  flex: 1;
  padding: 0.5rem;
  font-size: 1rem;
  border: 1px solid #ccc;
  border-radius: 5px;
}

.upload-button {
  background-color: #4caf50;
  color: white;
  border: none;
  padding: 0.5rem 1rem;
  font-size: 1rem;
  border-radius: 5px;
  cursor: pointer;
}

.quote-table {
  width: 100%;
  border-collapse: collapse;
}

.quote-table th,
.quote-table td {
  padding: 0.5rem;
  border: 1px solid #ccc;
  text-align: left;
}

.quote-table th {
  background-color: #f1f1f1;
}

.edit-input {
  width: calc(100% - 60px);
  padding: 0.3rem;
  margin-right: 0.5rem;
  font-size: 0.9rem;
  border: 1px solid #ccc;
  border-radius: 3px;
}

.save-quote {
  background-color: #4caf50;
  color: white;
  border: none;
  padding: 0.3rem 0.6rem;
  font-size: 0.9rem;
  border-radius: 3px;
  cursor: pointer;
}

.edit-quote,
.delete-quote {
  padding: 0.3rem 0.6rem;
  border: none;
  border-radius: 3px;
  font-size: 0.9rem;
  cursor: pointer;
}

.edit-quote {
  background-color: #2196f3;
  color: white;
}

.delete-quote {
  background-color: #f44336;
  color: white;
}

/* Responsive Design */
@media (max-width: 768px) {
  .header {
    flex-wrap: wrap;
    padding: 1rem;
    text-align: center;
  }

  .logo-img {
    height: 40px;
  }

  .article-link {
    font-size: 1rem;
    padding: 0.4rem 0.8rem;
  }

  .container {
    padding: 1rem;
  }

  .quotes-form {
    flex-direction: column;
  }

  .quote-input {
    width: 100%;
    margin-bottom: 1rem;
  }

  .upload-button {
    width: 100%;
    padding: 0.5rem;
    font-size: 1rem;
  }
}

@media (max-width: 480px) {
  .admin-title {
    font-size: 1.5rem;
  }

  .section-title {
    font-size: 1.3rem;
  }

  .quote-input {
    font-size: 0.9rem;
    padding: 0.4rem;
  }

  .upload-button {
    font-size: 0.9rem;
    padding: 0.4rem;
  }

  .quote-table th,
  .quote-table td {
    font-size: 0.8rem;
    padding: 0.4rem;
  }

  .edit-quote,
  .delete-quote {
    font-size: 0.8rem;
    padding: 0.3rem;
  }
}

 </style>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Quotes</title>
    <style>
      /* Your existing styles */
    </style>
  </head>
  <body>
    <header class="header">
      <div class="logo">
        GoHealthy
      </div>
      <a class="article-link" href="/admin/home">Artikel</a>
      <a class="article-link" href="/login">Logout</a>
    </header>
    
    <main class="main">
      <h2 class="admin-title">SELAMAT DATANG DI DASHBOARD ADMIN</h2>
      <section class="quotes-section">
        <div class="container">
          <h3 class="section-title">QUOTES</h3>
          <div class="quotes-form">
            <input type="text" id="quoteInput" class="quote-input" placeholder="Tambahkan quote baru">
            <button id="uploadButton" class="upload-button">UNGGAH</button>
          </div>
          <table class="quote-table">
            <thead>
              <tr>
                <th>No</th>
                <th>Quote</th>
                <th>Aksi</th>
              </tr>
            </thead>
            <tbody id="quoteTableBody">
            </tbody>
          </table>
        </div>
      </section>
    </main>
    <script>
      const token = localStorage.getItem("token");
      document.addEventListener('DOMContentLoaded', () => {
        const quoteInput = document.getElementById('quoteInput');
        const uploadButton = document.getElementById('uploadButton');
        const quoteTableBody = document.getElementById('quoteTableBody');
        const apiUrl = 'https://be-gohealthy-production.up.railway.app/api/';
  
        async function addQuote(quoteText) {
          try {
            const response = await fetch(`${apiUrl}motivation`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'X-API-TOKEN': token,
              },
              body: JSON.stringify({ message: quoteText }),
            });
  
            if (!response.ok) {
              throw new Error(`HTTP error! Status: ${response.status}`);
            }
  
            alert('Quote berhasil ditambahkan!');
            loadQuotes();
          } catch (error) {
            console.error('Terjadi kesalahan saat menambahkan quote:', error);
            alert('Gagal menambahkan quote. Silakan coba lagi.');
          }
        }
  
        async function loadQuotes() {
          try {
            const response = await fetch(`${apiUrl}motivations`, {
              method: 'GET',
              headers: {
                'Content-Type': 'application/json',
                'X-API-TOKEN': token,
              },
            });
  
            if (!response.ok) {
              throw new Error(`HTTP error! Status: ${response.status}`);
            }
  
            const result = await response.json();
            renderQuotes(result.data);
          } catch (error) {
            console.error('Gagal memuat data quotes:', error);
          }
        }
  
        function renderQuotes(quotes) {
          quoteTableBody.innerHTML = '';
          quotes.forEach((quote, index) => {
            const row = document.createElement('tr');
  
            row.innerHTML = `
              <td>${index + 1}</td>
              <td><input type="text" class="edit-input" value="${quote.message}" data-id="${quote.motivationId}" disabled></td>
              <td>
                <button class="edit-quote" data-id="${quote.motivationId}">Edit</button>
                <button class="delete-quote" data-id="${quote.motivationId}">Hapus</button>
              </td>
            `;
  
            quoteTableBody.appendChild(row);
          });
        }
  
        async function deleteQuote(motivationId) {
          try {
            const response = await fetch(`${apiUrl}motivation/${motivationId}`, {
              method: 'DELETE',
              headers: {
                'X-API-TOKEN': token,
                'Content-Type': 'application/json',
              },
            });
  
            if (!response.ok) {
              throw new Error(`Error ${response.status}: ${response.statusText}`);
            }
  
            alert('Quote berhasil dihapus.');
            loadQuotes();
          } catch (error) {
            console.error('Gagal menghapus quote:', error);
            alert('Gagal menghapus quote. Silakan coba lagi.');
          }
        }
  
        async function editQuote(motivationId, newMessage) {
          try {
            const response = await fetch(`${apiUrl}motivation/${motivationId}`, {
              method: 'PUT',
              headers: {
                'X-API-TOKEN': token,
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({ message: newMessage }),
            });
  
            if (!response.ok) {
              throw new Error(`Error ${response.status}: ${response.statusText}`);
            }
  
            alert('Quote berhasil diperbarui.');
            loadQuotes();
          } catch (error) {
            console.error('Gagal memperbarui quote:', error);
            alert('Gagal memperbarui quote. Silakan coba lagi.');
          }
        }
  
        uploadButton.addEventListener('click', () => {
          const quoteText = quoteInput.value.trim();
          if (quoteText === '') {
            alert('Quote tidak boleh kosong!');
            return;
          }
  
          addQuote(quoteText);
          quoteInput.value = '';
        });
  
        quoteTableBody.addEventListener('click', (event) => {
          const target = event.target;
  
          if (target.classList.contains('delete-quote')) {
            const quoteId = target.dataset.id;
            if (confirm('Apakah Anda yakin ingin menghapus quote ini?')) {
              deleteQuote(quoteId);
            }
          }
  
          if (target.classList.contains('edit-quote')) {
            const quoteId = target.dataset.id;
            const inputField = document.querySelector(`input[data-id='${quoteId}']`);
            if (inputField.disabled) {
              inputField.disabled = false;
              target.textContent = 'Simpan';
            } else {
              const newMessage = inputField.value.trim();
              if (newMessage === '') {
                alert('Quote tidak boleh kosong!');
                return;
              }
              editQuote(quoteId, newMessage);
            }
          }
        });
  
        loadQuotes();
      });
  </script>

</body>
</html>
